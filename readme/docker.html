<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>docker</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="=readme/modest.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">docker</h1>
</header>
<h1 id="docker-cli">docker CLI</h1>
<h2 id="introduction">Introduction</h2>
<p>The <code>docker</code> CLI provides the user with simple commands to manage the <a href="https://github.com/OCXStandard/ocx-validator">OCX validator</a> container without the need for the detailed knowledge of how to pull the OCX validator image from the Docker Hub and start the container. A prerequisite is to have a docker service installed and accessible from your computer. Currently, the docker CLI only supports <a href="https://docs.docker.com/desktop/">Docker Desktop on Windows</a>.</p>
<h2 id="installing-the-docker-environment">Installing the docker environment</h2>
<p>Follow the <a href="https://docs.docker.com/desktop/install/windows-install/">installation instructions</a> to install the docker runtime environment. The OCX Validator will require more resources than the default set-up. After the Docker Desktop installation, increase the available memory resources for docker from the default 2024 MB to 8192 MB by changing the value of the <code>memoryMiB</code> key in the JSON settings file:</p>
<pre><code>C:\Users\[USERNAME]\AppData\Roaming\Docker\settings.json.</code></pre>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  <span class="er">&quot;memoryMiB&quot;:</span> <span class="er">8192,</span></span></code></pre></div>
<p>Save the file and restart the Docker Desktop.</p>
<h2 id="usage">Usage</h2>
<p>From the command line prompt, type the help command for the docker CLI to obtain the information of the available commands:</p>
<pre><code>ocxtools &gt;: docker --help

 Usage:  [OPTIONS] COMMAND [ARGS]...

╭─ Options ────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ --install-completion          Install completion for the current shell.                                              │
│ --show-completion             Show completion for the current shell, to copy it or customize the installation.       │
│ --help                        Show this message and exit.                                                            │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
╭─ Commands ───────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ check        Check the status of the docker validator container.                                                     │
│ run          Start the docker validator container.                                                                   │
│ start        Start the docker Desktop (Windows only).                                                                │
│ stop         Stop and remove the validator container.                                                                │
╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯

ocxtools &gt;:</code></pre>
<h3 id="check">check</h3>
<p>The <code>check</code> command will check if the docker runtime is up:</p>
<pre class="commandline"><code>ocxtools &gt;: docker check
❌     Command failed with error:
error during connect: this error may indicate that the docker daemon is not running: Get
&quot;http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.24/containers/json?all=1&quot;: open //./pipe/docker_engine: The system cannot find
the file specified.</code></pre>
<p>If the check fails as shown above, issue the <code>start</code> command to start the Docker Desktop</p>
<h3 id="start">start</h3>
<p>The <code>start</code> command wil start the Docker Desktop:</p>
<pre class="commandline"><code>ocxtools &gt;: docker start
0
ocxtools &gt;:</code></pre>
<p>Wait for the desktop to start before running the OCX Validator container.</p>
<h3 id="run">run</h3>
<p>The <code>run</code> command wil start the OCX Validator container:</p>
<pre class="commandline"><code>ocxtools &gt;: docker run
❌     Command failed with error:
3.0.0b5: Pulling from 3docx/validator
Digest: sha256:a40bb70875081c4bc613f797991966d71772f7d54958fe471d7015ec0f893ced
Status: Image is up to date for 3docx/validator:3.0.0b5
docker: Error response from daemon: Conflict. The container name &quot;/validator&quot; is already in use by container &quot;ee7c6abc5271797b6e1c28f543d461d6b29d3fa503dfc1680777261533c05b44&quot;. You have to remove (or rename) that container to be able to reuse that name.
See &#39;docker run --help&#39;.

ℹ     Command output:
CONTAINER ID   IMAGE                     COMMAND                  CREATED       STATUS                       PORTS                    NAMES
ee7c6abc5271   3docx/validator:3.0.0b5   &quot;java -XX:+ExitOnOut…&quot;   2 hours ago   Exited (255) 3 minutes ago   0.0.0.0:8080-&gt;8080/tcp   validator
</code></pre>
<p>The above result shows us two things happening in the background: 1. The <code>run</code> command will pull the latest docker image from the repository on Docker Hub. In the case above, there is an uptodate version already available in the runtime environment. This is perfectly fine. 2. The next response is an error message when the command tries to create the <code>validator</code> container from the pulled image. Since there is already a container named <code>validator</code> the command fails.</p>
<p>In order to come around this problem, you need to remove the container first.</p>
<h2 id="stop">stop</h2>
<p>The <code>stop</code> command will do two things: 1. stop a running <code>validator</code> container 2. remove the container</p>
<pre class="commandline"><code>ocxtools &gt;: docker stop
ℹ     Command output:
validator

ℹ     Command output:
validator

ocxtools &gt;:</code></pre>
<p>After running the <code>stop</code> command, issue the <code>run</code> command to pull a fresh image (if available) and run the validator:</p>
<pre class="commandline"><code>ocxtools &gt;: docker run
ℹ     Command output:
d0c1409927be662249f8350c0c8dc20bd451c17a780e3239d1c23c58e964108d

ℹ     Command output:
CONTAINER ID   IMAGE                     COMMAND                  CREATED        STATUS                  PORTS                    NAMES
d0c1409927be   3docx/validator:3.0.0b5   &quot;java -XX:+ExitOnOut…&quot;   1 second ago   Up Less than a second   0.0.0.0:8080-&gt;8080/tcp   validator

ocxtools &gt;:</code></pre>
<p>Now the OCX Validator is ready. See the <code>validator</code> commands for how to validate the 3Docx models.</p>
</body>
</html>
